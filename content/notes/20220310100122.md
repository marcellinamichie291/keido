+++
title = "📝イベント駆動型プログラミング"
lastmod = 2022-10-25T14:43:41+09:00
tags = ["WIKI"]
draft = false
+++

-   up: [📁プログラミングパラダイム]({{< relref "20220116193313.md" >}})
-   links
    -   [イベント駆動型プログラミング - Wikipedia](https://ja.wikipedia.org/wiki/%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E9%A7%86%E5%8B%95%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0)
    -   [イベント駆動型プログラミング | IT用語辞典 | 大塚商会](https://www.otsuka-shokai.co.jp/words/event-driven-type-programming.html)
-   refs:
    -   [🔖組込み開発]({{< relref "20220310100907.md" >}})
    -   [📁Software Design]({{< relref "20220220102258.md" >}})


## 📝イベント駆動型プログラミング(Event-Driven Programming)とは {#b7f65a}

ユーザー側の操作による受動的なイベントの発生によって, コンピュータ側の能動的なプロセスの実行とプログラムフローの選択が決定されるというプログラミングパラダイム.

GUIプログラミング/デバイスドライバプログラミングでよく用いられる.


## イベント駆動型パラダイムの基礎概念 {#9cca70}


### イベント {#4cdb19}

Event. プログラムのフローとは別に発生する外部の事象, またはその事象の情報を含んだメッセージ.

-   マウスクリック
-   キーボード押下
-   センサーやシグナル受信によるハードウェア入力
-   別スレッドからの通知


### トリガー {#a3ef5f}

Trigger, イベントを発生させるきっかけ.

プログラム内部でイベントを起こすことを「イベントをトリガーする」ともいう.


### イベントハンドラ {#b7dce6}

Event Handler.

イベントが発生したときに実行する手続き([サブルーチン]({{< relref "20220305083612.md#edc87bc9-1270-452c-9181-6672d7d38bc0" >}})).


### イベントディスパッチャー {#f9efeb}

Event Dispatcher.

発生したイベントをイベントハンドラーに振り分ける機能.

単純な実装では単なるif構文.

サーバ技術だと, [Web HTTP Routing]({{< relref "20220220095102.md#000c65d6-26ab-4a38-afea-b5dbf6d71520" >}}).


### イベントキュー {#b69af7}

複数のイベントが同時発生したり連続して発生したりした場合に, 順番に処理するために保存するデータ構造, FIFO.

メッセージキューともいう.


### イベントループ {#ec963d}

イベントを待機するループを持つ機構, 末尾再帰.

メッセージループ, メッセージポンプとも.


## 他のパラダイムとの関係 {#bae4ff}


### メッセージパッシングとの関係 {#0a1236}

非同期IOによって処理をブロッキングすることなく進めていくという観点では, 広義では[📝メッセージパッシングプログラミング]({{< relref "20221008220000.md" >}})の範疇に入る.

ただイベント駆動というと, ハードウェアからとのトリガーなどの組込みだったりGUIプログラミングを伴うアプリ開発で使われることがおおい印象.

[🏷組込み開発]({{< relref "20220310100907.md" >}})


## イベント駆動型パターン {#f5970b9e-c2ac-4d82-b677-5a7f564b8c9b}


### ⚙Flux Pattern {#fadcff95-afc4-4e09-89a8-f1ca23394a16}

フラックス, Flux Archtecture.

保存状態をStoresに委譲し, イベントハンドラはActionのトリガーに特化する.

ReactにおけるReduxが有名, Clojureでは[📝reagent]({{< relref "20220529054544.md" >}}).


### Command Pattern {#49ce14}

オブジェクト指向プログラミングで用いられるパターン.

[Command Pattern]({{< relref "20220309184220.md#6526189d-1a5c-47ae-8423-506a65a6898c" >}}).


## 有限オートマン {#7aa7446c-e036-4744-a27a-493056fd7268}

Finite State Machine, FSMとよく訳される.

有限オートマン. 状態遷移のための制御方法.

-   [有限オートマトン - Wikipedia](http://ja.wikipedia.org/wiki/%E6%9C%89%E9%99%90%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3)

以下の 5 つの構成要素からなる.

-   Inputs
-   Outputs
-   States
-   State Transition Graph (STG)
    -   Tree
    -   Matrix
-   Output Determination


### Moore Machine {#1ae0b5}

ムーアマシン. 出力が (入力によらず) 現在の状態によってのみ決定される有限オートマトン.

```language
NextState = f (Input, CurrentState)
Output = g (CurrentState)
```


### Mealy Machine {#f3c9bf}

ミーリマシン. 出力が現在状態と入力によって決定される有限オートマトン.

```language
Output = h (Input, CurrentState)
```


### 実装方法 {#fde81e}

```c

#define N = 2

typedef enum { yes, no} state;
struct FSM {
  unsigned char out;     /* レシジスタへの出力 */
  unsigned char next[N]  /* 次の状態グラフ. ここでは Matrix */
};
```


### Statecharts {#ed84e3eb-2c76-4914-bf40-5cbf699a5cf3}

State Machineの表現方法の一つ.

-   [What is a statechart? - Statecharts](https://statecharts.dev/what-is-a-statechart.html)
-   [Introduction to state machines and statecharts | XState Docs](https://xstate.js.org/docs/guides/introduction-to-state-machines-and-statecharts/#states)


### FST {#1a5a6b06-c1c4-4738-bb86-6a1e5fcfcfd4}

[Finite-state transducer - Wikipedia](https://en.wikipedia.org/wiki/Finite-state_transducer)

Lucene のFinate State TransducerはFSMの100倍速い?

-   [Luceneで使われてるFSTを実装してみた（正規表現マッチ：VMアプローチへの招待） - Qiita](https://qiita.com/ikawaha/items/be95304a803020e1b2d1)


### References {#d95867}

-   [Clojure FSM]({{< relref "20220211142329.md#1401c497-200e-4f4a-a01c-1ce372308804" >}})
