+++
title = "ğŸ“Clojure ãƒ‡ãƒãƒƒã‚°"
tags = ["clojure", "debug", "WIKI"]
draft = false
+++

Clojure é–‹ç™ºã«ãŠã‘ã‚‹ãƒ‡ãƒãƒƒã‚°ã¾ã¨ã‚.

refs: [ğŸ“Clojure DX]({{< relref "20220119063524.md" >}}) [ğŸ“Clojure REPL Driven Development]({{< relref "20220117205249.md" >}})


## printãƒ‡ãƒãƒƒã‚° {#920c3a}

å¤ä»£äººã‹ã‚‰ç¾ä»£ã¾ã§å¼•ãç¶™ãŒã‚Œã¦ã„ã‚‹ç”±ç·’æ­£ã—ããƒ‡ãƒãƒƒã‚°æ‰‹æ³•, aka. ã‚ãŸã—ã®å¾—æ„æŠ€.


### print/println {#b994a1}

Clojureã§ã‚‚ã£ã¨ã‚‚æœ‰åãªæ¨™æº–å‡ºåŠ›é–¢æ•°.


### pr/prn/pr-str {#c9b548}

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…å®¹ã‚’ã„ã„æ„Ÿã˜ã«å‡ºåŠ›ã—ã¦ãã‚Œã‚‹.

(println "ãŠã‚Œã¯ã“ã“ã ã‚ˆ")ã®ã‚ˆã†ãªãƒˆãƒ¬ãƒ¼ã‚¹ãƒ‡ãƒãƒƒã‚°ã«ã¯printlnã‚’ã¤ã‹ã„, ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã‚’ã¿ã‚‹(Inspectã™ã‚‹)ã«ã¯prnã‚’ã¤ã‹ã†ã®ãŒä½¿ã„åˆ†ã‘.


### str {#341be9}


### clojure.pprint {#63df50}

Pretty Print for Clojure.

[clojure.pprint namespace | ClojureDocs](https://clojuredocs.org/clojure.pprint).

```clojure
(require '[clojure.pprint/pprint :as pp])
```

-   pprint: ã„ã„æ„Ÿã˜ã«å‡ºåŠ›.

prnã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã¨, ãŸã¨ãˆã°å¤§ããªãƒã‚¹ãƒˆã—ãŸMapã¯1è¡Œã«è¡¨ç¤ºã•ã‚Œã¦è¦‹ã«ãã„.ãã®å ´åˆã¯, clojure.pprint.pprintã‚’ã¤ã‹ã†ã¨è¦‹ã‚„ã™ããªã‚‹.

REPLã§ **(pp)** ã¨è©•ä¾¡ã™ã‚‹ã¨æœ€çµ‚è©•ä¾¡çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹. ã“ã®ppã®ä¾¿åˆ©ãªä½¿ã„æ–¹ã¯, æ™®é€šã«æ¨™æº–å‡ºåŠ›ã—ãŸçµæœãŒè¤‡é›‘ã ã£ãŸã¨ãã«, å†åº¦ppã‚’é€šã˜ã¦è¡¨ç¤ºã™ã‚‹ã“ã¨ã§ã•ã£ãã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãŒã„ã„æ„Ÿã˜ã«ãªã‚‹.


### print-method {#6b25b1}

Javaã®ã‚¯ãƒ©ã‚¹ã«ã‚ˆãè‡ªåˆ†ã§å®Ÿè£…ã™ã‚‹toStringãƒ¡ã‚½ãƒƒãƒ‰ãŒClojureã«ã‚‚ã»ã—ã„ï¼

-> [print-method](https://clojuredocs.org/clojure.core/print-method) ã¨ã„ã†multimethodã‚’ã¤ã‹ã†.

toStringã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹ã¨Javaã®ã‚¯ãƒ©ã‚¹ã‚’System.out.printlnã™ã‚‹ã¨ãã«ã‚¯ãƒ©ã‚¹ã®å†…å®¹è¡¨ç¤ºã‚’è‡ªåˆ†ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹.

clojureã§ã¯ print-methodã¨ã„ã†multimethodãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹.

ãŸã ã—, åŸºæœ¬çš„ã«ã¯Clojureã¯ãƒ‡ãƒ¼ã‚¿ã‚’Mapã§æ‰±ã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã®ã§,
ãã‚‚ãã‚‚ã„ã‚‰ãªã„ã‹ã‚‚ã—ã‚Œãªã„. Javaã§toStringãŒå¿…è¦ã ã£ãŸã®ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­èº«ã‚’è¦‹ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‰. Clojureãªã‚‰ç›´æ¥Eval!


### hashp {#3e90a4}

<https://github.com/weavejester/hashp>

hashpã‚’ã¤ã‹ã†ã¨ spyçš„ã«å¤‰æ•°ã®å†…å®¹ã‚’è£œè¶³ã§ãã‚‹.

ã‚³ãƒ¬ã¯å¤§å¤‰ã¹ã‚“ã‚Š!


### clojure.core tap {#79279ea5-3aea-42c1-b65e-d7dc02e65858}

Clojure1.10ã‹ã‚‰å°å…¥ã•ã‚ŒãŸæ©Ÿèƒ½.

-   add-tap ã§å‡ºåŠ›å…ˆã‚’æŒ‡å®š.
-   tap> ã§å‡ºåŠ›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æŒ‡å®š.
-   remove-tapã§å‡ºåŠ›å…ˆã‚’å‰Šé™¤.

tapè‡ªä½“ã¯Editorã‚„REPLã‹ã‚‰ä½¿ã†ã®ã ãŒ, ã“ã‚Œã¨é€£æºã™ã‚‹ãƒ„ãƒ¼ãƒ«ãŒä¾¿åˆ©.
GUIã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ãŒå¯èƒ½ã«ãªã‚‹.

see more -> [ğŸ“Clojure Data Visualization Tools]({{< relref "20220324181510.md#d125cc7e-ef71-4637-a3fd-f04a4481cd79" >}})


## logging {#ad8a22}

ref: [Clojure: Logging]({{< relref "20220211142329.md#fc3521e8-72f6-4416-83b2-067344374a9a" >}})


## Clojure REPLã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¾ã¨ã‚ {#f8f03b}

REPLã§è©•ä¾¡ã—ãŸã¨ãã«å‡ºã¦ãã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®åˆ†é¡ã¨ãã®å¯¾å‡¦.


### CIDERã«ãŠã‘ã‚‹error-buffer {#0a9075}

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ cider-error bufferã«å‡ºåŠ›ã•ã‚Œã‚‹.

stack-frameã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãŸãã•ã‚“ã§ã¦ãã‚‹ãŒ,
filterã‚’ã¤ã‹ã†ã¨è¦‹ã‚„ã™ããªã‚‹.

```emacs-lisp
(setq cider-stacktrace-default-filters '(tooling dup))
;; or
(setq cider-stacktrace-default-filters '(project))
```


### Unhandled clojure.lang.ArityException {#d63b63}

é–¢æ•°å‘¼ã³å‡ºã—æ™‚ã®å¼•æ•°ã®æ•°ãŒé•ã†.

```text
1. Unhandled clojure.lang.ArityException
   Wrong number of args (0) passed to: xxxx
```


## Tips {#a0d4cc}


### nREPLã‚’å†èµ·å‹•ã›ãšã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã—ãŸã„ {#168a24}

<https://github.com/clj-commons/pomegranate>

ã©ã†ã‚‚nREPLã«ãƒã‚°ãŒã‚ã‚‹ã‚ˆã†ã§ã‚ãŸã—ã®ç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹ã¨ãƒãƒ³ã‚°ã—ç¶šã‘ãŸã®ã§ä½¿ã†ã®ã‚’ã‚„ã‚ãŸ. (<span class="timestamp-wrapper"><span class="timestamp">&lt;2022-08-07 Sun 08:18&gt;</span></span>)


## References {#d95867}

-   [Clojure ã«ãŠã‘ã‚‹å¹¾ã¤ã‹ã®å®Ÿè·µçš„ãªãƒ‡ãƒãƒƒã‚°æ–¹æ³• - (define -ayalog '())](https://ayato.hateblo.jp/entry/20150419/1429437366)
-   [6. (ãƒ‡)ãƒã‚°ã‚ºãƒ»ãƒ©ã‚¤ãƒ• by (dosync radio)](https://anchor.fm/dosync-radio/episodes/6-e97avg)
