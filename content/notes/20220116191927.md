+++
title = "ğŸ“Clojure State and Concurrency"
lastmod = 2022-10-12T20:20:43+09:00
tags = ["WIKI"]
draft = false
+++

Clojureã®ä¸¦è¡Œãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦.

-   up: [ğŸ“‚Clojure Core]({{< relref "20220112142936.md" >}})
-   tags.
    -   [ğŸ”–Concurrent Programming]({{< relref "20220116195030.md" >}})
-   refs:
    -   [ğŸ“Clojure: core.async]({{< relref "20220118091058.md" >}})
    -   [Clojure: çŠ¶æ…‹ç®¡ç†ã¨ã‚·ã‚¹ãƒ†ãƒ ]({{< relref "20220211142329.md#497a8160-d192-45db-aa0c-84b9a2442861" >}})


## Clojure: çŠ¶æ…‹(State) {#bf0a21}

çŠ¶æ…‹ã¨ã¯ï¼Œã‚ã‚‹æ™‚ç³»åˆ—ã«ãŠã‘ã‚‹ã‚ã‚‹æ™‚ç‚¹ã§ã® [åŒä¸€å®Ÿä½“]({{< relref "20220305075933.md#98601b3a-f18c-41c5-b5bd-171bc8b11782" >}}) ã§ã‚ã‚‹.

Clojureã«ãŠã„ã¦å€¤ã¯ [immutable]({{< relref "20220305075933.md#fbc351d5-b1d2-4dcd-95cd-9d5021f88565" >}}) ã§ã‚ã‚Š [persistent]({{< relref "20220305075933.md#7e585ab7-a40f-4a1e-aeaa-812eb632f2ff" >}}) ã§ã‚ã‚‹.

ã—ã‹ã—ï¼Œå¤‰æ›´ä¸å¯ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦å¤‰æ›´å¯èƒ½ãªå‚ç…§ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§å¤‰æ›´ä¸å¯ã®ã‚‚ã®ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹.

Clojureã§ã¯ï¼Œå€¤ã¨åŒä¸€å®Ÿä½“ã‚’æ˜ç¢ºã«åŒºåˆ¥ã—ã¦æ‰±ã†. 4ã¤ã®å‚ç…§å‹ã‚’ç”¨æ„ã—ã¦ã„ã‚‹.

-   ref: å”èª¿çš„ï¼ŒåŒæœŸçš„ãªå¤‰æ›´ã‚’ç®¡ç†.
-   atom: ç‹¬ç«‹çš„, åŒæœŸçš„ãªå¤‰æ›´ã‚’ç®¡ç†.
-   agent: éåŒæœŸãªå¤‰æ›´ã‚’ç®¡ç†.
-   var: ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ­ãƒ¼ã‚«ãƒ«ãªå¤‰æ›´ã‚’ç®¡ç†.


## Clojureå‚ç…§å‹ {#6849a2}


### Clojure: atom {#0bf80dd9-476b-48b3-a31c-17d9fb238318}

Clojureã«ãŠã‘ã‚‹ **atom** ã¯éå”èª¿çš„(Independent)ã§åŒæœŸçš„(Syncronous)ãªå¤‰æ›´ã‚’ç®¡ç†ã™ã‚‹.

atomã®æ›´æ–°ã§ã¯ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¯ä¸è¦. **reset!** é–¢æ•°ã‚’ç”¨ã„ã‚‹.

**swap!** é–¢æ•°ã¯ï¼Œatomã‚’å¼•æ•°ã«ã¨ã‚Šæ›´æ–°ã—ãŸå€¤ã‚’è¿”ã™é–¢æ•°ã‚’é©ç”¨ã™ã‚‹ãŸã‚ã®é–¢æ•°.

```clojure
;; atomã®å®£è¨€
(def foo (atom 0))

;; atomãŒbindã•ã‚ŒãŸ.
foo

;; å‚ç…§å…ˆã®å€¤ã‚’ãƒªãƒ¼ãƒ€ãƒã‚¯ãƒ­@ã§èª­ã‚€
@foo

;; å€¤ã®æ›´æ–°
(reset! foo 2)

;; é–¢æ•°å€¤ã®è¨­å®š
(swap! foo (fn [_] (+ 1 1)))
```


### Clojure: ref {#98bcb478-d508-4490-ac92-5f81d13f2ea5}

Clojureã«ãŠã‘ã‚‹ **ref** ã¯å”èª¿çš„(Corrdinate)ã§åŒæœŸçš„(Syncronous)ãªå¤‰æ›´ã‚’ç®¡ç†ã™ã‚‹. ã¤ã¾ã‚Šï¼Œè¤‡æ•°ã®å‚ç…§ã‚’åŒæ™‚ã«æ›´æ–°ã™ã‚‹.

[Software transactinal memory(STM)]({{< relref "20220116195030.md#2b37f626-bb5f-4c2c-bd7c-802134d9df87" >}}) ã‚’Clojureã§å®Ÿç¾ã™ã‚‹ãŸã‚ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹.

refã§å®£è¨€ã—ãŸå€¤ã‚’èª­ã‚€ã«ã¯ **deref** ã‚’ã¤ã‹ã†. ãƒªãƒ¼ãƒ€ãƒã‚¯ãƒ­ã§ã‚ã‚‹ **@** ã‚’ã¤ã‹ã£ã¦ç•¥è¨˜ã™ã‚‹.

å‚ç…§å…ˆã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ›´ã™ã‚‹ã«ã¯, **ref-set** or **alter** ã‚’ã¤ã‹ã†.

**commute** ã‚’ã¤ã‹ã†ã¨, alterã«é †åºä¿è¨¼ãŒã§ãã‚‹.


### Clojure: agent {#6af7597c-b0f6-4fcc-a6b3-4a7db9c064e5}

Clojureã«ãŠã‘ã‚‹ **agent** ã¯éå”èª¿çš„(Independent)ã§éåŒæœŸçš„(Asyncronous)ãªå¤‰æ›´ã‚’ç®¡ç†ã™ã‚‹.

ãƒªãƒ¼ãƒ€ãƒ¼ãƒã‚¯ãƒ­ **@** ã‚’åˆ©ç”¨ã—ã¦å€¤ã‚’èª­ã‚€.

**send** ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§å€¤ã‚’æ›´æ–°ã™ã‚‹. æ­£ç¢ºã«ã¯, send ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã§agentã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã®é–¢æ•°å€¤ã‚’ä¸ãˆã‚‹ã¨ï¼ŒClojureã¯ãã®å‡¦ç†ã‚’ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ã§ã®å‡¦ç†ã‚¨ãƒ³ã‚­ãƒ¥ãƒ¼ã—ã¦ã‚ã¨ã¯ClojureãŒã‚ˆã‚ã—ãå®Ÿè¡Œã—ã¦ãã‚Œã‚‹.

**send-off** ã‚’åˆ©ç”¨ã™ã‚‹ã¨, ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ãŒå¿…è¦ã«å¿œã˜ã¦å‹•çš„ã«æ‹¡å¼µã•ã‚Œã‚‹ã®ã§ã‚ã‹ã‚Šã‚„ã™ãè¨€ãˆã°ã™ãã«å®Ÿè¡Œã•ã‚Œã‚‹.ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿ãªã©ã®ã‚ˆã†ãªBlocking I/O, ï¼‘ã¤ã®å‡¦ç†ã«ã‚ˆã£ã¦ã‚¹ãƒ¬ãƒƒãƒ‰ãŒæ­¢ã¾ã£ã¦ã—ã¾ã†å ´åˆã«è‡ªå‹•ã§åˆ¥ã®ã‚¹ãƒ¬ãƒƒãƒ‰ãŒä½œã‚‰ã‚Œã¦å®Ÿè¡Œã•ã‚Œã‚‹.

ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ã¤ã‹ã£ã¦ClojureãŒæš‡ãªã¨ãã«å®Ÿè¡Œã™ã‚‹ãŸã‚, ã„ã¤agentã®å€¤ãŒæ›´æ–°ã•ã‚ŒãŸã‹ã‚ã‹ã‚‰ãªã„. å¾…ã¡åˆã‚ã›ã«ã¯ **await** ã‚’åˆ©ç”¨ã™ã‚‹.

agentã®å€¤ã®æ›´æ–°åŒ–å¤±æ•—ã™ã‚‹ã¨ï¼Œãã‚Œä»¥å¾Œã®agentã®æ›´æ–°ã¯ã§ããªããªã‚‹. ãƒ•ã‚¿ã‚’ã—ã¦ã—ã¾ã†ã‚ˆã†ãªã‚‚ã®. **agent-errors** ã«å¤±å†…å®¹ãŒå…¥ã£ã¦ã„ã‚‹. ã¾ãŸ **set-error-mode!** ãƒ¡ã‚½ãƒƒãƒ‰ã§ **:continue** ã‚’æŒ‡å®šã™ã‚‹ã¨ç¶šè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹.


### Clojure: deref {#463f6b2c-f02e-4d0b-9a48-76d696d6ce35}

as known as @ reader macro

çŠ¶æ…‹ã®èª­ã¿å‡ºã—ã«åˆ©ç”¨ã§ãã‚‹ãƒªãƒ¼ãƒ€ãƒã‚¯ãƒ­ã ãŒ, ä½•ã§ã‚‚èª­ã‚ã‚‹.atomã ã‚ã†ã¨refã ã‚ã†ã¨agentã ã‚ã†, futureã‚‚promiseã‚‚.

[Clojure Threading Macros]({{< relref "20220116083656.md#508f51c6-37cb-4b61-9bce-91075f1f067e" >}}) ã ã¨ [deref](https://clojuredocs.org/clojure.core/deref) ã‚’ä½¿ã†ã®ã‹ãªï¼Ÿ best practiceãŒã‚ã‹ã‚‰ãªã„.


## Clojure Concurrent Library {#4f2897}

-   [ğŸ“Clojure core.async]({{< relref "20220118091058.md" >}})


### ğŸ“Manifold {#07f0fd0d-e6e0-4be1-b9bf-8b0fc7d74723}

éåŒæœŸãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ãŸã‚ã®éƒ¨å“ã‚’æä¾›.

<https://github.com/clj-commons/manifold>

2ã¤ã®æŠ½è±¡ãŒãƒã‚¤ãƒ³ãƒˆ.

-   deferreds
-   streams

deferredsã¨ã¯èãæ…£ã‚Œãªã„ãŒ, å»¶æœŸ, å…ˆå»¶ã°ã—ã®æ„å‘³. é…å»¶è©•ä¾¡ã¨ã„ã†ã“ã¨ã‹ãª? streamã¯ä¸¦è¡Œãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ãŠã‘ã‚‹[Streams]({{< relref "20220116195030.md#d1bfb9ba-5970-4e9e-ae14-ed2d2c692f81" >}})ã®æ¦‚å¿µ.

Manifoldã®Streamã‚’åˆ©ç”¨ã—ã¦ä½œã‚‰ã‚ŒãŸé€šä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒ[aleph]({{< relref "20220209102028.md#f9f86e8c-b69a-43b8-8631-64ea7c9e48e8" >}}).


#### âš–core.asyncã¨ã®æ¯”è¼ƒ {#9388c9}

cf. [ğŸ“Clojure core.async]({{< relref "20220118091058.md" >}})

-   [What is the difference between Manifold and core.async? : Clojure](https://www.reddit.com/r/Clojure/comments/wmo5d6/what_is_the_difference_between_manifold_and/)
-   [Question on Manifold / Aleph - How to? - ClojureVerse](https://clojureverse.org/t/question-on-manifold-aleph/2742)

core.asyncã¨manifoldã¯åŒã˜ã“ã¨ãŒã§ãã‚‹. manifoldã®let-flow/go-offãŒgoã«ç›¸å½“.

<https://aleph.io/manifold/deferreds.html>


### References {#d95867}

-   [A Tour of Manifoldâ€™s Deferred, Stream and Event Bus API | by Functional Human | Medium](https://functionalhuman.medium.com/a-tour-of-manifold-an-easy-to-use-library-of-building-blocks-for-asynchronous-programming-f4bb5d9c6ba9)
-   [Manifold stream/consume, is each execution of consumpe blocking within the stream? : Clojure](https://www.reddit.com/r/Clojure/comments/47ht3e/manifold_streamconsume_is_each_execution_of/)
-   [Manifold basics in a nutshell.pdf - Speaker Deck](https://speakerdeck.com/somiel/manifold-basics-in-a-nutshell)


## Clojure Concurrency Topics {#ebcec5}


### ğŸ’¡Clojureã®ã„ã‚ã‚“ãªä¸¦è¡Œå‡¦ç† {#210920}

ref. [Clojureã®ã„ã‚ã‚“ãªä¸¦è¡Œå‡¦ç†ã®ä½¿ã„åˆ†ã‘ - ç´™ç®±](https://boxofpapers.hatenablog.com/entry/clojure-concurrent)

ã„ã‚ã„ã‚ã‚ã‚‹. ä½¿ã„åˆ†ã‘ãŒå¿…è¦.

-   agentç³»(send/senf-off)
-   futureç³»(pmap)
-   core.asyncç³»(go)


### atomã§ã®reset! ã¨swap!ã®é•ã„ {#88423db9-b606-48ce-9a62-e6b3149d0514}

ä½¿ã„åˆ†ã‘ã¯å˜ãªã‚‹å¤‰æ•°ã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã ã‘ã‹, ä»Šã®æƒ…å ±ã‚’æ“ä½œã‚’ã—ã¦updateã™ã‚‹ã‹.

-   reset!ã¯ä»Šã®å€¤ã«é–¢ã‚ã‚‰ãšå€¤ã‚’ã‚»ãƒƒãƒˆã™ã‚‹.
-   swap!ã¯ä»Šã«é–¢æ•°ã‚’é©ç”¨ã™ã‚‹.

ã¨ã¯ã„ãˆ, reset!ã¨swap!ã¯äº’æ›æ€§ãŒã‚ã‚‹.

[Clojure Style Guide]({{< relref "20220313110515.md#3b44f8d5-e1ad-483a-81eb-6a61650baf64" >}}) ã«ã¯, **Prefer swap! over reset!** ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ã‚‚ã‚ã‚‹.
ã¨ã‚Šã‚ãˆãšè¿·ã£ãŸã‚‰swap!ã§ã‚ˆã„.


### Clojureã®STMã¯ä½¿ã„ç‰©ã«ãªã‚‰ãªã„ {#b8c2d4}

æ·±å €ã—ã¦ãªã„ã‘ã©å°‘ã—æ°—ã«ãªã‚‹å•é¡Œ.

[Clojureã®STMã¯ä½¿ã„ç‰©ã«ãªã‚‰ãªã„ â€“ JUMPERZ.NET Blog](https://kanatoko.wordpress.com/2011/05/06/clojure_stm_too_slow/)


### è¤‡æ•°ã®çŠ¶æ…‹ã‚’ä¸€åº¦ã«updateã¯refã¨ dosync {#650533}

ã¯ã˜ã‚, çŠ¶æ…‹ã®å±æ€§ã‚’è¤‡æ•°æŒã¨ã†ã¨ã—ãŸæ™‚, atomã«Mapã‚’bindã™ã‚‹ã®ã‹ã¨æ€ã£ãŸãŒ, ãã‚‚ãã‚‚refã¨dosyncã§updateã™ã‚Œã°ã‚ˆã„ã®ã ã£ãŸ.

refã¨dosyncã¯ãã‚‚ãã‚‚ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã—ã‹å‚ç…§ã—ãªã„å‰æã®ã¨ãã‚‚ä½¿ã†ã‚‚ã®ãªã®ã‹ãª? è«–ç†çš„ã«ã¯æ›´æ–°ã§çŸ›ç›¾ãŒç”Ÿã˜ãªã„ã®ã ã‘ã©.


### âš–Clojure: atom/delay/future/promiseã®æ¯”è¼ƒ {#0cd352b6-a062-445a-bb00-dce7714f76ed}

ã„ãšã‚Œã‚‚åŒã˜é–¢æ•°deref/@(reader macro)ã§èª­ã¿å‡ºã›ãŸã‚Š, realized?ã§å‘¼ã³å‡ºã—ãŸã‹ç¢ºèªã§ãã‚‹ã¨ã“ã‚ãŒã‚„ã‚„ã“ã—ã„.

-   atom: ãƒ¡ãƒ¢ãƒªå…±æœ‰
    -   ã‚¹ãƒ¬ãƒƒãƒ‰å†…ã®ãƒ¡ãƒ¢ãƒªå…±æœ‰ã®ä»•çµ„ã¿ã‚ã‚ŠçŠ¶æ…‹ã‚’æ‰±ã†.
-   delay: é…å»¶è©•ä¾¡
    -   **force or deref or @** ã‚’ã¤ã‹ã£ã¦è©•ä¾¡ã—ã¦ã¯ã˜ã‚ã¦è¨ˆç®—ãŒã¯ã˜ã¾ã‚‹.
-   future: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œ
    -   è©•ä¾¡ã¯ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰(i.e.åˆ¥ã‚¹ãƒ¬ãƒƒãƒ‰)ã§å§‹ã¾ã‚‹ãŒ,
        ãã®çµæœã¯å‚ç…§ã—ã¦ã¯ã˜ã‚ã¦ã‚ã‹ã‚‹
        (or ã¾ã è¨ˆç®—ãŒçµ‚ã‚ã£ã¦ãªã„ã‹ã‚‚ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‹ã‚‹).
-   promise: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œ + é…å»¶è©•ä¾¡.
    -   promiseã¯futureã«ä¼¼ã¦ã„ã‚‹.
        -   ã©ã¡ã‚‰ã‚‚ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œã«å¯¾ã™ã‚‹å‚ç…§ã‚’è¿”ã™.
        -   futureã¯å®£è¨€æ™‚ã«ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ã‚‚å®£è¨€ã—ã¦å³æ™‚å®Ÿè¡Œ.
        -   promiseã¯å®£è¨€æ™‚ã¯å‚ç…§ã«éããšdeleverã§å‡¦ç†ã‚’ã‚ã¨ã‹ã‚‰bindingã™ã‚‹.
    -   promiseã¯å€¤, futureã¯é–¢æ•°å€¤ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸.
        -   ã©ã¡ã‚‰ã‚‚ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œã®ãŸã‚derefã§çµæœã‚’å‚ç…§ã§ãã‚‹.

---

-   refs.
    -   [Clojureã§ã®é…å»¶è©•ä¾¡é–¢æ•°(delay/force)]({{< relref "20220116094551.md#32a7e20b-78d2-41cd-b911-bd85865eac95" >}})
-   links
    -   [clojure future vs delay - Stack Overflow](https://stackoverflow.com/questions/28985818/clojure-future-vs-delay)
    -   [terminology - How do Clojure futures and promises differ? - Stack Overflow](https://stackoverflow.com/questions/4623536/how-do-clojure-futures-and-promises-differ)
    -   [Cuddly, Octo-Palm Tree: The Clojure Promise](https://cuddly-octo-palm-tree.com/posts/2021-11-14-clojure-promise/)


### ğŸ’¡Clojureã®promise/deliverã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å¤‰æ•°ã®ã“ã¨ {#9b145138-9ed9-431d-a2a3-3146e607c72d}

Promiseã¯bindã•ã‚Œã‚‹ã¾ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’æ­¢ã‚ã‚‹. ã“ã‚Œã¯ã¾ã•ã«ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã«ãŠã‘ã‚‹[ğŸ“ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å¤‰æ•°]({{< relref "20221008195738.md#37f12983-1ae5-41d9-a130-02a6b3afc0ac" >}})ã®ã“ã¨ã§ã‚ã‚‹.

ãŸã¾ãŸã¾éå»ãƒ¡ãƒ¢ã‚’å¾©ç¿’ã—ã¦ã„ãŸã‚‰æ°—ã¥ã„ãŸã‘ã©, è¨€ã‚ã‚Œã¦ã¿ãªã„ã¨Documentã«æ›¸ã„ã¦ãªã‘ã‚Œã°ãã‚ŒãŒãªã‚“ãªã®ã‹ã‚ã‹ã‚‰ãªã„...

-   refs.
    -   [ğŸ“æ±ºå®šæ€§ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°]({{< relref "20221008195738.md" >}})
-   links.
    -   [Promise/Deliver use cases](https://groups.google.com/g/clojure/c/CxVIqkC6gHI)


### ğŸ’¡æ¥ç¶šå¾…æ©Ÿã¨promise {#2fe182}

ãªã‚‹ã»ã©ã¨æ€ã£ãŸpromiseã®ä½¿ã„æ–¹ãƒ¡ãƒ¢.

<https://github.com/ejschoen/clj-socketio-client/blob/040f41e9a5465df7378ec0af5b87ae5bbc9cd782/src/clj_socketio_client/core.clj#L59>

clientã‹ã‚‰ã®websocketã®æ¥ç¶šå‡¦ç†ã§åˆ©ç”¨ã—ã¦ã„ã‚‹. å‘¼ã³å‡ºã—å‰ã§promiseã®å€¤ã‚’ä½œæˆã—ã¦, callbacké–¢æ•°ã®ä¸­ã§promiseã«å¯¾ã—ã¦deliverã‚’ã™ã‚‹. å‘¼ã³å…ƒã®é–¢æ•°ã§ã¯derefã§å¾…æ©Ÿã™ã‚‹.

ã“ã“ã§ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯, promiseã®å€¤ã¯éåŒæœŸã§å‹•ãçœŸå½å€¤ã®ãƒ•ãƒ©ã‚°ã§ã‚ã‚‹ãŒ, callbacké–¢æ•°ã§deliverã«ã‚ˆã£ã¦å€¤ãŒbindã•ã‚Œã‚‹ã¾ã§ã¯ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦é–¢æ•°ã‚’å³æ™‚ãƒªã‚¿ãƒ¼ãƒ³ã•ã›ãšã«connectå®Œäº†ã—ãŸã‚‰ãƒªã‚¿ãƒ¼ãƒ³ã™ã‚‹.
