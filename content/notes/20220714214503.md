+++
title = "ğŸ“Clojure Algo Trading Development"
lastmod = 2022-11-05T19:40:57+09:00
tags = ["WIKI"]
draft = false
+++

-   up: [ğŸ“‚Clojureé–‹ç™º]({{< relref "20220211141917.md" >}})
-   refs.
    -   [ğŸ“ä»®æƒ³é€šè²¨boté–‹ç™º]({{< relref "20220717145220.md" >}})

[Clojure]({{< relref "20211111225741.md" >}})ã«ã‚ˆã‚‹[ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å–å¼•]({{< relref "20220714203637.md" >}})ã®å¯èƒ½æ€§ã¾ã¨ã‚.


## ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¾ã¨ã‚ {#f7eeec}


### å–å¼•æ‰€wrapper {#3c32a3}


#### XChange {#99190501-d066-4bf8-889c-c2d1d844e850}

[ccxt]({{< relref "20220717145220.md#1db67877-477a-4ae9-ad9e-61666f84c82b" >}})ã®Javaç‰ˆ. ã„ã‚ã‚“ãªå–å¼•æ‰€APIã®ãƒ©ãƒƒãƒ‘ãƒ¼.

-   <https://knowm.org/open-source/xchange/>
-   <https://github.com/knowm/XChange>


#### contek {#256b16}

æœ€è¿‘ç†±å¿ƒã«é–‹ç™ºã•ã‚Œã¦ã„ã‚‹Javaã®API wrapper.

-   <https://github.com/contek-io/io.contek.invoker>


### ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ãƒ©ã‚¤ãƒ–ãƒ©ãƒª {#98cf83}


#### ta-lib {#21a2b5}

Pythonã§ã‚ˆãä½¿ã‚ã‚Œã¦ã„ã‚‹ta-libã‚‚ã‚ã‚Œã¯ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãªãƒ„ãƒ¼ãƒ«ã®ãƒ©ãƒƒãƒ‘ãƒ¼ãªã®ã§, Pythonã ã‘ã§ãªãJavaã‚„C++ã§ã‚‚ã¤ã‹ãˆã‚‹.

<https://ta-lib.org/>


#### ta4j {#7391f7}

-> [ğŸ“ta4j](#a73023ea-3fff-4eac-b2a8-726bfda7d51b)


## ğŸ“ta4j {#a73023ea-3fff-4eac-b2a8-726bfda7d51b}

ta4jã¯Javaã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª.

-   <https://github.com/ta4j/ta4j/>
-   <https://ta4j.github.io/ta4j-wiki/>
-   [Backtesting in Clojure with ta4j](https://blog.jex.io/post/backtesting-in-clojure-with-ta4j.html)


### Barã‚¯ãƒ©ã‚¹ã¨BarSeriesã‚¯ãƒ©ã‚¹ {#c74f66}

[Bar Series and Bars | Ta4j - Technical Analysis for Java!](https://ta4j.github.io/ta4j-wiki/Time-series-and-bars.html)

Barã‚¯ãƒ©ã‚¹ã¯OHLCVã«ç›¸å½“, BarSeriesã¯OHLCVã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿. BaseBarSeriesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ã¦, ã“ã“ã«OHLCVã«å½“ãŸã‚‹ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹Barã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(BaseBarã§ç”Ÿæˆ)ã‚’è¿½åŠ ã—ã¦ã„ã.

Basexxxã¨ã„ã†ã®ãŒå®Ÿè£…ã§BaseãŒã¤ã„ã¦ãªã„ã‚„ã¤ãŒinterface.

OHLCVãƒ‡ãƒ¼ã‚¿ã¯å¤–éƒ¨ã‚µãƒ¼ãƒã‹ã‚‰APIã§å–å¾—ã™ã‚‹ã‹, è‡ªåˆ†ã§æ­©ã¿å€¤ã‚’ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ã¦ç”¨æ„ã™ã‚‹ã‹ã—ã¦.addBarã§seriesã—ã¦ã„ã. ã‚‚ã—ãã¯å®šæœŸçš„ã« .addTrade/.addPriceé–¢æ•°ã‚’èª­ã‚“ã§ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹.


### ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®ä½¿ã„æ–¹ {#7823bd}

[Technical Indicators | Ta4j - Technical Analysis for Java!](https://ta4j.github.io/ta4j-wiki/Technical-indicators.html)

JavaDocã§åˆ©ç”¨å¯èƒ½ãªã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã¯ç¢ºèªã§ãã‚‹.

[Ta4j Core 0.11 API](https://oss.sonatype.org/service/local/repositories/releases/archive/org/ta4j/ta4j-core/0.11/ta4j-core-0.11-javadoc.jar/!/index.html)

å„indicatorã®ä½¿ã„æ–¹ã¯ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å‚è€ƒã«ã™ã‚‹(ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ãªã„).

<https://github.com/ta4j/ta4j/tree/master/ta4j-core/src/test/java/org/ta4j/core/indicators>


## Clojure Trading Bot Topics {#c3515d}


### APIèªè¨¼ã‚’é€šã™æ–¹æ³• {#68ee31}

ã©ã®å–å¼•æ‰€ã‚‚Private APIã‚’ä½¿ã†ãŸã‚ã«ã¯èªè¨¼ã‚’é€šã™å¿…è¦ãŒã‚ã‚‹ãŒ, ã©ã“ã‚‚åŒã˜ã‚ˆã†ãªæ–¹æ³•ã§èªè¨¼ã‚’ã™ã‚‹. ãã—ã¦ãã®èªè¨¼ã¯ä»–ã®ã‚³ãƒ¼ãƒ‰ã‚„Clojureã§ãªãã¦ã‚‚Javaã‚’å‚è€ƒã«ã‚³ãƒ”ãƒšã™ã‚Œã°ãŠã‘.

4ã¤ã®æƒ…å ±ãŒå¿…è¦.

-   api_key: API Key. ã‚µã‚¤ãƒˆã‹ã‚‰å–å¾—
-   timestamp: ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®Unix Timestamp
-   nonce: ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—. ã“ã“ãŒrequest bodyã®textã®å ´åˆã‚‚.
-   signature:
    -   ç½²åç”¨textã‚’API Secretã§HMAC_SHA256ç½²å.
    -   ã ã„ãŸã„åŒã˜ãªã®ã§ã‚³ãƒ”ãƒšã§ã„ã‘ã‚‹.


#### timestamp {#d7e6d5}

Unixæ™‚é–“(ã¨Stringå¤‰æ›).

```clojure
(defn ->timestamp []
  (.toString (System/currentTimeMillis))
```


#### nonce {#cb584e}

ãƒ©ãƒ³ãƒ€ãƒ ãª16bytesã®æ–‡å­—åˆ—ç”Ÿæˆ.

```clojure
(import '[java.security SecureRandom])

(defn toHexString [bytes]
  (apply str (map #(format "%02x" %) bytes)))

(defn generate-nonce []
  (let [random (SecureRandom.)
        bytes  (bytes (byte-array 16))]
    (.nextBytes random bytes)
    (toHexString bytes)))
```


#### HMAC SHA256ç½²åã—ãŸHex(16é€²æ•°)æ–‡å­—åˆ— {#a2f934}

```clojure
(import '[javax.crypto Mac])
(import '[javax.crypto.spec SecretKeySpec])

(defn secretKeyInst
  [key mac]
  (SecretKeySpec. (.getBytes key) (.getAlgorithm mac)))

(defn ->sign [key text]
  (let [algo      "HMACSHA256"
        mac       (Mac/getInstance algo)
        secretKey (secretKeyInst key mac)]
    (-> (doto mac
          (.init secretKey)
          (.update (.getBytes text)))
        .doFinal
        toHexString)))
```


#### References {#d95867}

-   [GitHub - funcool/buddy-core: Cryptographic api for Clojure](https://github.com/funcool/buddy-core)
    -   æš—å·ã«å½¹ç«‹ã¤Clojure Lib.
-   [Encrypting Keys in Clojure Applications | Matthew Downey](https://matthewdowney.github.io/encrypting-keys-in-clojure-applications.html)
    -   [Encrypting Keys in Clojure Applications - Lambda Infinite](https://inflambda.tech/clojure-article.html?title=Encrypting+Keys+in+Clojure+Applications&updated=1589587200000)
    -   ??? åŒä¸€è¨˜äº‹.
-   [Socket.IO 2.0 (WebSocket)](https://bf-lightning-api.readme.io/docs/endpoint-socket-io)
    -   bitFlyer Socket.IOã«Javaã®èªè¨¼ã‚³ãƒ¼ãƒ‰.


### ğŸ’¡å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹frame/payload sizeãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚° {#c12a0a}

ref. [Using Aleph as a Clojure WebSocket Client | Matthew Downey](https://matthewdowney.github.io/aleph-websocket-client-not-jetty.html)

ã¾ã ã“ã‚Œã®æ„å‘³ã™ã‚‹ã¨ã“ã‚ã‚’ç†è§£ã—ã¦ãªã„ãŒãƒ¡ãƒ¢.

BitMEXã®ã‚ˆã†ãªnoisy socketã«ã¯frame & frame payload sizeã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã¨ã„ã†è©±.

```clojure
(http/websocket-client
  "wss://www.bitmex.com/realtime"
  {:max-frame-payload 1e7 :max-frame-size 1e7})
```

ã“ã®ä¾‹ã§ã‚‚ :max-frame-payload 131072ã«è¨­å®š.

<https://github.com/skyscraper/md-aggregator/blob/master/src/md_aggregator/ftx.clj>


### JVM Performances Turning {#cd60c6b1-a768-4f57-981b-2639b6226213}

GCå‘¨ã‚Š.

-   [Forcing a JVM Heap Dump Programmatically from Clojure | Matthew Downey](https://matthewdowney.github.io/forcing-jvm-heap-dump-programmatically-clojure.html)
-   [Why we chose Java for our High-Frequency Trading application | by Jad Sarmo | Medium](https://medium.com/@jadsarmo/why-we-chose-java-for-our-high-frequency-trading-application-600f7c04da94)


### C++ã¨äº’è§’? {#810db7}

[Deep Learning for Programmers](https://aiprobook.com/deep-learning-for-programmers/)

> ;; <https://twitter.com/draganrocks/status/1245988386005037056>
>
> Clojure has MUCH simpler syntax than C++ or Java, is fast even for numerical computing (via Intel's MKL and DNNL, CUDA, cuBLAS, and cuDNN!). You get the benefits of C++ without the drawbacks. The book is about DeepLearning which  you might or might not use in algo trading.


### aleph websocket client examples {#2b98a8}

[ğŸ“Clojure: aleph]({{< relref "20221013151243.md#f9f86e8c-b69a-43b8-8631-64ea7c9e48e8" >}})

-   <https://github.com/lmchoi/crypto-arb/blob/master/src/crypto_arb/exchanges/common/feeds.clj>
-   <https://github.com/skyscraper/algo-trader/blob/master/src/algo_trader/handlers/utils.clj>
-   <https://github.com/solussd/tradebot/blob/main/src/tradebot/exchanges/coinbasepro/api.clj>
-   <https://github.com/PabloReszczynski/phoenix-client>


## ğŸ¤”Insights {#cbf834}

ä»®èª¬ãƒ™ãƒ¼ã‚¹ã ãŒ, Clojureã®Lazy Sequenceã‚„core.asyncãŒtrading botã«ã™ã”ãæ´»èºã—ãã†ãªäºˆæ„Ÿã¯ã—ã¦ã„ã‚‹(ä½¿ã„ã“ãªã›ã‚Œã°ã­).


### ğŸ’¡Javaã®è‚©ã«ä¹—ã‚‹ {#a9a430}

Javaã¯ã‚¦ã‚©ãƒ¼ãƒ«ãƒ»ã‚¹ãƒˆãƒªãƒ¼ãƒˆã§ä½¿ã‚ã‚Œã¦ããŸè¨€èªãªã®ã§ãã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½¿ãˆã‚‹.


### REPLã‹ã‚‰ç¨¼åƒä¸­ã®botã‚’åˆ¶å¾¡ {#bcc7f9}

[ğŸ“Clojure Integrant]({{< relref "20220531084041.md" >}})

ã“ã‚Œã¯å¼·ã„.


### Clojure: ä¸¦åˆ—ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° & é…å»¶ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã®åŠ› {#c60f86}

æ¤œè¨¼ã§ããŸã‚‰updateã™ã‚‹.

-   [ğŸ“Clojure State and Concurrency]({{< relref "20220116191927.md" >}})
-   [Clojure: é…å»¶ã‚·ãƒ¼ã‚±ãƒ³ã‚¹/ç„¡é™ã‚·ãƒ¼ã‚±ãƒ³ã‚¹(Laziness Sequence)]({{< relref "20220116080205.md#4f51982f-85bd-4e92-a85e-12cf66360653" >}})

> ;; <https://www.reddit.com/r/Clojure/comments/kzepdq/an_opensource_robinhood_client_for_algotrading/>
>
> Python is great for analysing data, and the ecosystem and libraries for algo trading get you further faster than Clojure. But when it comes to actually trading: itâ€™s asynchronously receiving events (market data) and sending orders, then waiting asynchronously again for them to be filled. This is exactly where Clojure shines in my opinion, making it a great fit.

Seqenceã®è¿½åŠ ã§ã¯concatã®ä»£ã‚ã‚Šã«[lazy-cat]({{< relref "20220116080205.md#df1fc0ec-ae88-4597-929f-184653193516" >}})ã‚’åˆ©ç”¨ã™ã‚‹.

ãƒ¡ãƒ¢ãƒªã«ä¹—ã‚‰ãªã„å¤§ããªãƒ‡ãƒ¼ã‚¿ã‚’ä¸€éƒ¨ã ã‘å–ã‚Šå‡ºã—ã¦è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹.


## ğŸ”—References {#3b90d2}

-   [GitHub - clojure-finance/clojure-backtesting: Backtesting framework for quantitative investing/trading](https://github.com/clojure-finance/clojure-backtesting)
    -   è¤‡æ•°äººã§ãƒ¡ãƒ³ãƒ†ã•ã‚Œã¦ã„ã‚‹. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚è¬ã®å……å®Ÿ.


### ğŸ”Clojureã§ã®Trading boté–‹ç™ºäº‹ä¾‹ã¾ã¨ã‚ {#27e92a}

è¨­è¨ˆã¨ã‹protocolã¨ã‹å‚è€ƒã«ã—ãŸã„ã¨ã“ã‚.

-   <https://github.com/weissjeffm/gdax-bot>
    -   websocket clinetã§gniazdoã‚’åˆ©ç”¨.
    -   core.asyncã‚’é§†ä½¿ã—ã¦websocketã®æƒ…å ±ã‚’å‡¦ç†.
-   <https://github.com/vonadz/trader>
    -   incantarã¨ã‹ä½¿ã‚ã‚Œã¦ã‚‹
-   <https://github.com/analyticbastard/xicotrader>
    -   ã‚¬ãƒã‚ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯.
-   <https://github.com/skyscraper/algo-trader>
    -   æœ€è¿‘ã¤ãã‚‰ã‚Œã¦ã„ã‚‹, manifoldä½¿ã‚ã‚Œã¦ã‚‹.
-   <https://github.com/skyscraper/md-aggregator>
    -   marketæƒ…å ±ã‚’websocketçµŒç”±ã§è“„ç©.
-   <https://github.com/eeng/mercurius>
    -   Clean Architectureã§Clojure Crypto Trading Botã¤ãã£ã¦ã¿ãŸ.
-   [Using Aleph as a Clojure WebSocket Client | Matthew Downey](https://matthewdowney.github.io/aleph-websocket-client-not-jetty.html)
    -   éåŒæœŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªalephã§websocketçµŒç”±ã®tickerå–å¾—.
-   <https://github.com/lmchoi/crypto-arb>
    -   Arbitrage, manifoldã®ä½¿ã„æ–¹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹.


### Java {#d52387}

Javaã‚‚å‚è€ƒã«.

-   <https://github.com/teletha/cointoss>
    -   è¬ã®ã‚¬ãƒã£ã½ã„Java Arbitrageã‚³ãƒ¼ãƒ‰ğŸ¤”


### Sixtant {#fdbe8e}

Clojureã§Market making and algorithmic HFT ã—ã¦ã„ã‚‹ä¼šç¤¾.

-   <https://www.sixtant.io/>

Algo trading & Market making ã®ä¼šç¤¾ã§åƒã„ã¦ã„ã‚‹äººã®ãƒ–ãƒ­ã‚°(co-founder).

-   [Home | Matthew Downey](https://matthewdowney.github.io/)
    -   Clojureã®æƒ…å ±å¤šã‚, Clojureã§Algo Tradingã—ã¦ã‚‹?
    -   [GitHub - SixtantIO/hum: An experimental library for efficient binary serialization of L2 book data.](https://github.com/SixtantIO/hum)
    -   [Using Clojure's Transducers in Asychronous Systems | Matthew Downey](https://matthewdowney.github.io/managing-resources-clojure.html)
        -   ã“ã‚Œã¯backtestã‚’æƒ³å®šã—ã¦ã„ã‚‹.
-   [AMA with Sixtant - Market Making on dYdX - YouTube](https://www.youtube.com/watch?v=OVS0IytKZRE&t=6s)
